var BSON, Db, assert, jsonDict, jsonFunc, log, mongo, mongoUri, util;
mongo = require('mongodb');
Db = mongo.Db;
BSON = mongo.BSONPure;
mongoUri = 'mongodb://localhost/mongo_test';
assert = require('power-assert');
util = require('util');
log = function (obj) {
    return console.log(util.inspect(obj, false, null));
};
jsonFunc = function () {
    return {
        name: 'jon',
        age: 20
    };
};
jsonDict = {
    name: 'jon',
    age: 20
};
describe('insert Tests', function () {
    var coll, db, json;
    db = null;
    coll = null;
    json = null;
    before(function (done) {
        return Db.connect(mongoUri, function (err, DB) {
            db = DB;
            db.dropCollection('testCollection');
            db.close();
            return done();
        });
    });
    beforeEach(function (done) {
        return Db.connect(mongoUri, function (err, DB) {
            db = DB;
            return db.collection('testCollection', function (err, collection) {
                coll = collection;
                return done();
            });
        });
    });
    afterEach(function (done) {
        return db.dropCollection('testCollection', function (err, result) {
            db.close();
            return done();
        });
    });
    return describe('insert', function () {
        it('insert\u306E\u7B2C\u4E00\u5F15\u6570\u306Bobject\u3092\u6E21\u3059\u3068insert\u3067\u304D\u308B\u3002\u518D\u5EA6\u540C\u3058object\u3092\u6E21\u3057\u3066\u3082insert\u3067\u304D\u308B', function (done) {
            return coll.insert({ name: 'taro' }, function (err, result) {
                assert(assert._expr(assert._capt(assert._capt(err, 'arguments/0/left') === null, 'arguments/0'), {
                    content: 'assert(err === null)',
                    filepath: 'test/insertTest.js',
                    line: 68
                }));
                return coll.insert({ name: 'taro' }, function (err, result) {
                    assert(assert._expr(assert._capt(assert._capt(err, 'arguments/0/left') === null, 'arguments/0'), {
                        content: 'assert(err === null)',
                        filepath: 'test/insertTest.js',
                        line: 72
                    }));
                    return coll.find().toArray(function (err, items) {
                        assert(assert._expr(assert._capt(assert._capt(assert._capt(items, 'arguments/0/left/object').length, 'arguments/0/left') === 2, 'arguments/0'), {
                            content: 'assert(items.length === 2)',
                            filepath: 'test/insertTest.js',
                            line: 74
                        }));
                        return done();
                    });
                });
            });
        });
        it('object\u3092\u5909\u6570\u5316\u3057\u3066insert\u3059\u308B\u30682\u56DE\u3081\u3067\u5931\u6557\u3059\u308B', function (done) {
            json = { name: 'taro' };
            return coll.insert(json, function (err, result) {
                assert(assert._expr(assert._capt(assert._capt(err, 'arguments/0/left') === null, 'arguments/0'), {
                    content: 'assert(err === null)',
                    filepath: 'test/insertTest.js',
                    line: 85
                }));
                coll.insert(json, function (err, result) {
                    return assert(assert._expr(assert._capt(err, 'arguments/0'), {
                        content: 'assert(err)',
                        filepath: 'test/insertTest.js',
                        line: 87
                    }));
                });
                return done();
            });
        });
        it('\u5909\u6570\u5316\u3057\u305Fjson\u306B\u306Finsert\u3057\u305F\u30BF\u30A4\u30DF\u30F3\u30B0\u3067_id\u304C\u4ED8\u4E0E\u3055\u308C\u3066\u3044\u308B', function (done) {
            json = { name: 'taro' };
            assert(assert._expr(assert._capt(assert._capt(assert._capt(json, 'arguments/0/left/object')._id, 'arguments/0/left') === assert._capt(void 0, 'arguments/0/right'), 'arguments/0'), {
                content: 'assert(json._id === void 0)',
                filepath: 'test/insertTest.js',
                line: 96
            }));
            return coll.insert(json, function (err, result) {
                assert(assert._expr(assert._capt(assert._capt(json, 'arguments/0/object')._id, 'arguments/0'), {
                    content: 'assert(json._id)',
                    filepath: 'test/insertTest.js',
                    line: 98
                }));
                return done();
            });
        });
        it('json\u3092\u30B0\u30ED\u30FC\u30D0\u30EB\u5909\u6570\u304B\u3089\u53D6\u5F97\u3057\u305F\u5834\u5408\u3082_id\u306F\u4ED8\u4E0E\u3055\u308C\u308B(\u66F8\u304D\u63DB\u308F\u308B)', function (done) {
            json = jsonDict;
            assert(assert._expr(assert._capt(assert._capt(assert._capt(json, 'arguments/0/left/object')._id, 'arguments/0/left') === assert._capt(void 0, 'arguments/0/right'), 'arguments/0'), {
                content: 'assert(json._id === void 0)',
                filepath: 'test/insertTest.js',
                line: 104
            }));
            return coll.insert(json, function (err, result) {
                var json2;
                assert(assert._expr(assert._capt(assert._capt(json, 'arguments/0/object')._id, 'arguments/0'), {
                    content: 'assert(json._id)',
                    filepath: 'test/insertTest.js',
                    line: 107
                }));
                json2 = jsonDict;
                assert(assert._expr(assert._capt(assert._capt(json2, 'arguments/0/left') === assert._capt(json, 'arguments/0/right'), 'arguments/0'), {
                    content: 'assert(json2 === json)',
                    filepath: 'test/insertTest.js',
                    line: 109
                }));
                return done();
            });
        });
        return it('json\u3092\u95A2\u6570\u304B\u3089\u53D6\u5F97\u3057\u305F\u5834\u5408\u3001_id\u306F\u4ED8\u4E0E\u3055\u308C\u306A\u3044', function (done) {
            json = jsonFunc();
            assert(assert._expr(assert._capt(assert._capt(assert._capt(json, 'arguments/0/left/object')._id, 'arguments/0/left') === assert._capt(void 0, 'arguments/0/right'), 'arguments/0'), {
                content: 'assert(json._id === void 0)',
                filepath: 'test/insertTest.js',
                line: 115
            }));
            return coll.insert(json, function (err, result) {
                var json2;
                assert(assert._expr(assert._capt(assert._capt(json, 'arguments/0/object')._id, 'arguments/0'), {
                    content: 'assert(json._id)',
                    filepath: 'test/insertTest.js',
                    line: 118
                }));
                json2 = jsonFunc();
                assert(assert._expr(assert._capt(assert._capt(assert._capt(json2, 'arguments/0/left/object')._id, 'arguments/0/left') === assert._capt(void 0, 'arguments/0/right'), 'arguments/0'), {
                    content: 'assert(json2._id === void 0)',
                    filepath: 'test/insertTest.js',
                    line: 120
                }));
                return done();
            });
        });
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlc3QvaW5zZXJ0VGVzdC5qcyJdLCJuYW1lcyI6WyJCU09OIiwiRGIiLCJhc3NlcnQiLCJqc29uRGljdCIsImpzb25GdW5jIiwibG9nIiwibW9uZ28iLCJtb25nb1VyaSIsInV0aWwiLCJyZXF1aXJlIiwiQlNPTlB1cmUiLCJvYmoiLCJjb25zb2xlIiwiaW5zcGVjdCIsIm5hbWUiLCJhZ2UiLCJkZXNjcmliZSIsImNvbGwiLCJkYiIsImpzb24iLCJiZWZvcmUiLCJkb25lIiwiY29ubmVjdCIsImVyciIsIkRCIiwiZHJvcENvbGxlY3Rpb24iLCJjbG9zZSIsImJlZm9yZUVhY2giLCJjb2xsZWN0aW9uIiwiYWZ0ZXJFYWNoIiwicmVzdWx0IiwiaXQiLCJpbnNlcnQiLCJfZXhwciIsIl9jYXB0IiwiY29udGVudCIsImZpbGVwYXRoIiwibGluZSIsImZpbmQiLCJ0b0FycmF5IiwiaXRlbXMiLCJsZW5ndGgiLCJfaWQiLCJqc29uMiJdLCJtYXBwaW5ncyI6IkFBQUEsSUFBSUEsSUFBSixFQUFVQyxFQUFWLEVBQWNDLE1BQWQsRUFBc0JDLFFBQXRCLEVBQWdDQyxRQUFoQyxFQUEwQ0MsR0FBMUMsRUFBK0NDLEtBQS9DLEVBQXNEQyxRQUF0RCxFQUFnRUMsSUFBaEU7QUFFQUYsS0FBQSxHQUFRRyxPQUFBLENBQVEsU0FBUixDQUFSLENBRkE7QUFJQVIsRUFBQSxHQUFLSyxLQUFBLENBQU1MLEVBQVgsQ0FKQTtBQU1BRCxJQUFBLEdBQU9NLEtBQUEsQ0FBTUksUUFBYixDQU5BO0FBUUFILFFBQUEsR0FBVyxnQ0FBWCxDQVJBO0FBVUFMLE1BQUEsR0FBU08sT0FBQSxDQUFRLGNBQVIsQ0FBVCxDQVZBO0FBWUFELElBQUEsR0FBT0MsT0FBQSxDQUFRLE1BQVIsQ0FBUCxDQVpBO0FBY0FKLEdBQUEsR0FBTSxVQUFTTSxHQUFULEVBQWM7QUFBQSxJQUNsQixPQUFPQyxPQUFBLENBQVFQLEdBQVIsQ0FBWUcsSUFBQSxDQUFLSyxPQUFMLENBQWFGLEdBQWIsRUFBa0IsS0FB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LE1BQUEsQ0FBT0EsTUFBQSxDQUFBK0IsS0FBQSxDQUFBL0IsTUFBQSxDQUFBZ0MsS0FBQSxDQUFBaEMsTUFBQSxDQUFBZ0MsS0FBQSxDQUFBaEMsTUFBQSxDQUFBZ0MsS0FBQSxDQUFBUyxLQUFBLDZCQUFNRCxHQUFOLDBCQUFjeEMsTUFBQSxDQUFBZ0MsS0FBQSxNQUFLLENBQUwsc0JBQWQ7QUFBQSxvQkFBQUMsT0FBQTtBQUFBLG9CQUFBQyxRQUFBO0FBQUEsb0JBQUFDLElBQUE7QUFBQSxrQkFBUCxFQUo2QztBQUFBLGdCQUs3QyxPQUFPaEIsSUFBQSxFQUFQLENBTDZDO0FBQUEsYUFBeEMsQ0FBUCxDQUhxRDtBQUFBLFNBQWhELENBQVAsQ0F0RG1DO0FBQUEsS0FBOUIsQ0FBUCxDQTVCa0M7QUFBQSxDQUFwQyIsInNvdXJjZXNDb250ZW50IjpbInZhciBCU09OLCBEYiwgYXNzZXJ0LCBqc29uRGljdCwganNvbkZ1bmMsIGxvZywgbW9uZ28sIG1vbmdvVXJpLCB1dGlsO1xuXG5tb25nbyA9IHJlcXVpcmUoXCJtb25nb2RiXCIpO1xuXG5EYiA9IG1vbmdvLkRiO1xuXG5CU09OID0gbW9uZ28uQlNPTlB1cmU7XG5cbm1vbmdvVXJpID0gXCJtb25nb2RiOi8vbG9jYWxob3N0L21vbmdvX3Rlc3RcIjtcblxuYXNzZXJ0ID0gcmVxdWlyZSgncG93ZXItYXNzZXJ0Jyk7XG5cbnV0aWwgPSByZXF1aXJlKCd1dGlsJyk7XG5cbmxvZyA9IGZ1bmN0aW9uKG9iaikge1xuICByZXR1cm4gY29uc29sZS5sb2codXRpbC5pbnNwZWN0KG9iaiwgZmFsc2UsIG51bGwpKTtcbn07XG5cbmpzb25GdW5jID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB7XG4gICAgbmFtZTogJ2pvbicsXG4gICAgYWdlOiAyMFxuICB9O1xufTtcblxuanNvbkRpY3QgPSB7XG4gIG5hbWU6ICdqb24nLFxuICBhZ2U6IDIwXG59O1xuXG5kZXNjcmliZShcImluc2VydCBUZXN0c1wiLCBmdW5jdGlvbigpIHtcbiAgdmFyIGNvbGwsIGRiLCBqc29uO1xuICBkYiA9IG51bGw7XG4gIGNvbGwgPSBudWxsO1xuICBqc29uID0gbnVsbDtcbiAgYmVmb3JlKGZ1bmN0aW9uKGRvbmUpIHtcbiAgICByZXR1cm4gRGIuY29ubmVjdChtb25nb1VyaSwgZnVuY3Rpb24oZXJyLCBEQikge1xuICAgICAgZGIgPSBEQjtcbiAgICAgIGRiLmRyb3BDb2xsZWN0aW9uKCd0ZXN0Q29sbGVjdGlvbicpO1xuICAgICAgZGIuY2xvc2UoKTtcbiAgICAgIHJldHVybiBkb25lKCk7XG4gICAgfSk7XG4gIH0pO1xuICBiZWZvcmVFYWNoKGZ1bmN0aW9uKGRvbmUpIHtcbiAgICByZXR1cm4gRGIuY29ubmVjdChtb25nb1VyaSwgZnVuY3Rpb24oZXJyLCBEQikge1xuICAgICAgZGIgPSBEQjtcbiAgICAgIHJldHVybiBkYi5jb2xsZWN0aW9uKCd0ZXN0Q29sbGVjdGlvbicsIGZ1bmN0aW9uKGVyciwgY29sbGVjdGlvbikge1xuICAgICAgICBjb2xsID0gY29sbGVjdGlvbjtcbiAgICAgICAgcmV0dXJuIGRvbmUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbiAgYWZ0ZXJFYWNoKGZ1bmN0aW9uKGRvbmUpIHtcbiAgICByZXR1cm4gZGIuZHJvcENvbGxlY3Rpb24oJ3Rlc3RDb2xsZWN0aW9uJywgZnVuY3Rpb24oZXJyLCByZXN1bHQpIHtcbiAgICAgIGRiLmNsb3NlKCk7XG4gICAgICByZXR1cm4gZG9uZSgpO1xuICAgIH0pO1xuICB9KTtcbiAgcmV0dXJuIGRlc2NyaWJlKFwiaW5zZXJ0XCIsIGZ1bmN0aW9uKCkge1xuXG4gICAgLypcbiAgICBpbnNlcnQoZG9jc1ssIG9wdGlvbnNdWywgY2FsbGJhY2tdKVxuICAgICAqL1xuICAgIGl0KFwiaW5zZXJ044Gu56ys5LiA5byV5pWw44Grb2JqZWN044KS5rih44GZ44GoaW5zZXJ044Gn44GN44KL44CC5YaN5bqm5ZCM44GYb2JqZWN044KS5rih44GX44Gm44KCaW5zZXJ044Gn44GN44KLXCIsIGZ1bmN0aW9uKGRvbmUpIHtcbiAgICAgIHJldHVybiBjb2xsLmluc2VydCh7XG4gICAgICAgIG5hbWU6ICd0YXJvJ1xuICAgICAgfSwgZnVuY3Rpb24oZXJyLCByZXN1bHQpIHtcbiAgICAgICAgYXNzZXJ0KGVyciA9PT0gbnVsbCk7XG4gICAgICAgIHJldHVybiBjb2xsLmluc2VydCh7XG4gICAgICAgICAgbmFtZTogJ3Rhcm8nXG4gICAgICAgIH0sIGZ1bmN0aW9uKGVyciwgcmVzdWx0KSB7XG4gICAgICAgICAgYXNzZXJ0KGVyciA9PT0gbnVsbCk7XG4gICAgICAgICAgcmV0dXJuIGNvbGwuZmluZCgpLnRvQXJyYXkoZnVuY3Rpb24oZXJyLCBpdGVtcykge1xuICAgICAgICAgICAgYXNzZXJ0KGl0ZW1zLmxlbmd0aCA9PT0gMik7XG4gICAgICAgICAgICByZXR1cm4gZG9uZSgpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIGl0KFwib2JqZWN044KS5aSJ5pWw5YyW44GX44GmaW5zZXJ044GZ44KL44GoMuWbnuOCgeOBp+WkseaVl+OBmeOCi1wiLCBmdW5jdGlvbihkb25lKSB7XG4gICAgICBqc29uID0ge1xuICAgICAgICBuYW1lOiAndGFybydcbiAgICAgIH07XG4gICAgICByZXR1cm4gY29sbC5pbnNlcnQoanNvbiwgZnVuY3Rpb24oZXJyLCByZXN1bHQpIHtcbiAgICAgICAgYXNzZXJ0KGVyciA9PT0gbnVsbCk7XG4gICAgICAgIGNvbGwuaW5zZXJ0KGpzb24sIGZ1bmN0aW9uKGVyciwgcmVzdWx0KSB7XG4gICAgICAgICAgcmV0dXJuIGFzc2VydChlcnIpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGRvbmUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIGl0KFwi5aSJ5pWw5YyW44GX44GfanNvbuOBq+OBr2luc2VydOOBl+OBn+OCv+OCpOODn+ODs+OCsOOBp19pZOOBjOS7mOS4juOBleOCjOOBpuOBhOOCi1wiLCBmdW5jdGlvbihkb25lKSB7XG4gICAgICBqc29uID0ge1xuICAgICAgICBuYW1lOiAndGFybydcbiAgICAgIH07XG4gICAgICBhc3NlcnQoanNvbi5faWQgPT09IHZvaWQgMCk7XG4gICAgICByZXR1cm4gY29sbC5pbnNlcnQoanNvbiwgZnVuY3Rpb24oZXJyLCByZXN1bHQpIHtcbiAgICAgICAgYXNzZXJ0KGpzb24uX2lkKTtcbiAgICAgICAgcmV0dXJuIGRvbmUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIGl0KCdqc29u44KS44Kw44Ot44O844OQ44Or5aSJ5pWw44GL44KJ5Y+W5b6X44GX44Gf5aC05ZCI44KCX2lk44Gv5LuY5LiO44GV44KM44KLKOabuOOBjeaPm+OCj+OCiyknLCBmdW5jdGlvbihkb25lKSB7XG4gICAgICBqc29uID0ganNvbkRpY3Q7XG4gICAgICBhc3NlcnQoanNvbi5faWQgPT09IHZvaWQgMCk7XG4gICAgICByZXR1cm4gY29sbC5pbnNlcnQoanNvbiwgZnVuY3Rpb24oZXJyLCByZXN1bHQpIHtcbiAgICAgICAgdmFyIGpzb24yO1xuICAgICAgICBhc3NlcnQoanNvbi5faWQpO1xuICAgICAgICBqc29uMiA9IGpzb25EaWN0O1xuICAgICAgICBhc3NlcnQoanNvbjIgPT09IGpzb24pO1xuICAgICAgICByZXR1cm4gZG9uZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGl0KCdqc29u44KS6Zai5pWw44GL44KJ5Y+W5b6X44GX44Gf5aC05ZCI44CBX2lk44Gv5LuY5LiO44GV44KM44Gq44GEJywgZnVuY3Rpb24oZG9uZSkge1xuICAgICAganNvbiA9IGpzb25GdW5jKCk7XG4gICAgICBhc3NlcnQoanNvbi5faWQgPT09IHZvaWQgMCk7XG4gICAgICByZXR1cm4gY29sbC5pbnNlcnQoanNvbiwgZnVuY3Rpb24oZXJyLCByZXN1bHQpIHtcbiAgICAgICAgdmFyIGpzb24yO1xuICAgICAgICBhc3NlcnQoanNvbi5faWQpO1xuICAgICAgICBqc29uMiA9IGpzb25GdW5jKCk7XG4gICAgICAgIGFzc2VydChqc29uMi5faWQgPT09IHZvaWQgMCk7XG4gICAgICAgIHJldHVybiBkb25lKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdfQ==
